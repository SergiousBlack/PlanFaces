<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"  
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Планы</title>
    </h:head>
    <h:body> 
        <ui:include src ="MainMenu.xhtml"/>
       
    <h:form >    
       
    <p:menubar >
        <p:menuitem id="SelfMenu" value="Добавить курс" actionListener = "#{graphBean.addyear()}" update=":data:cars"/>
        <p:menuitem value="Очистить все" actionListener ="#{graphBean.deleteYear()}" update=":data:cars"/>
        
        <p:menuitem action="#{graphBean.save()}" value="Сохранить" style="position: absolute;right: 0;" />
    </p:menubar>  
        
    </h:form>
        
        <h:form id="data">
            <br/>
            <p:dataTable id="cars" var="car" value="#{graphBean.mainList}" emptyMessage="Пусто" editable="true" style="text-align: center" editMode="cell" widgetVar="carsTable" >
             
               
                <p:ajax listener="#{graphBean.tableCellEdit}" event="cellEdit" />
                
                
             <f:facet name="header" >
                Период учебного процесса
            </f:facet>
            
               <p:column headerText="Курс" style="width: 100px" >  
               <p:cellEditor>  
                   <f:facet name="output"><h:outputText value="#{car.course}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.course}" style="width:100%">
                        <f:selectItems value="#{graphBean.coursesList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu>
                </f:facet>
               </p:cellEditor>  
               </p:column>  
                
                 <p:column headerText="Семестр" style="width: 100px" >  
               <p:cellEditor>  
                   <f:facet name="output"><h:outputText value="#{car.semestr}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.semestr}" style="width:100%">
                        <f:selectItems value="#{graphBean.semestersList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu>
                </f:facet>
               </p:cellEditor>  
               </p:column>     
                       
                <p:column headerText="Начало с" style="width: 100px" >  
               <p:cellEditor>  
                   <f:facet name="output"><h:outputText value="#{car.start}" ><f:convertDateTime pattern="dd-MM-yyyy" /></h:outputText><br/><h:outputText value="#{car.end}" ><f:convertDateTime pattern="dd-MM-yyyy" /></h:outputText></f:facet>
                <f:facet name="input">
                    <p:calendar value="#{car.start}" pattern="dd-MM-yyyy" />
                </f:facet>
               </p:cellEditor>  
               </p:column> 
                
                
       <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value1.type}"/>
                    <br/>
                    <h:outputText value="#{car.value1.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value1.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value1.start}" />
                    /
                    <p:calendar value="#{car.value1.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
        
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value2.type}"/>
                    <br/>
                    <h:outputText value="#{car.value2.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value2.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value2.start}" />
                    /
                    <p:calendar value="#{car.value2.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value3.type}"/>
                    <br/>
                    <h:outputText value="#{car.value3.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value3.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value3.start}" />
                    /
                    <p:calendar value="#{car.value3.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value4.type}"/>
                    <br/>
                    <h:outputText value="#{car.value4.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value4.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value4.start}" />
                    /
                    <p:calendar value="#{car.value4.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value5.type}"/>
                    <br/>
                    <h:outputText value="#{car.value5.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value5.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value5.start}" />
                    /
                    <p:calendar value="#{car.value5.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value6.type}"/>
                    <br/>
                    <h:outputText value="#{car.value6.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value6.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value6.start}" />
                    /
                    <p:calendar value="#{car.value6.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value7.type}"/>
                    <br/>
                    <h:outputText value="#{car.value7.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value7.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value7.start}" />
                    /
                    <p:calendar value="#{car.value7.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value8.type}"/>
                    <br/>
                    <h:outputText value="#{car.value8.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value8.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value8.start}" />
                    /
                    <p:calendar value="#{car.value8.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value9.type}"/>
                    <br/>
                    <h:outputText value="#{car.value9.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value9.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value9.start}" />
                    /
                    <p:calendar value="#{car.value9.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
                
                <p:column headerText="" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.value10.type}"/>
                    <br/>
                    <h:outputText value="#{car.value10.count}" /></f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.value10.type}" style="width:100%">
                        <f:selectItems value="#{graphBean.reductionList}" var="man" itemLabel="#{man}" itemValue="#{man}" />
                    </h:selectOneMenu><br/>
                    <p:calendar value="#{car.value10.start}" />
                    /
                    <p:calendar value="#{car.value10.end}" />
                </f:facet>
            </p:cellEditor>  
        </p:column>
               
                
            </p:dataTable>
        </h:form>
        
        
      
    </h:body>
 </html>

